<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carify - The Blockchain Revolution in the Automotive Industry</title>
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="static/img/favicon.ico">
    <!-- Main stylesheet -->
    <link rel="stylesheet" href="/static/css/styles.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" crossorigin="anonymous" />
    <!-- AOS (Animate On Scroll Library) CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css" crossorigin="anonymous" />
    
</head>
<body>
    <!-- NAVIGATION -->
    <nav>
        <h1>Carify</h1>
        <ul>
            <li><a href="#project-structure">Project</a></li>
            <li><a href="#about">About</a></li>
            <li><a href="#features">Features</a></li>
            <li><a href="#presale">Presale</a></li>
            <li><a href="#roadmap">Roadmap</a></li>
            <li><a href="#faq">F.A.Q</a></li>
        </ul>
        <div class="social-buttons">
            <a href="https://x.com/CARIFY_token" target="_blank" class="social-btn" title="Follow us on X">
                <img src="static/img/XX.png" alt="X" class="custom-icon">
            </a>
            <a href="https://www.tiktok.com/@carify_token" target="_blank" class="social-btn" title="Follow us on TikTok">
                <img src="static/img/tic-tac.png" alt="Tiktok" class="custom-icon">
            </a>
            <a href="https://coinmarketcap.com/community/profile/CARIFY/" target="_blank" class="social-btn" title="Visit our CoinMarketCap profile">
                <img src="static/img/cmpt.avif" alt="CoinMarketCap" class="custom-icon">
            </a>
            <a href="https://bscscan.com/token/0xf7c78ae754889471ca51bc8cc67ee50c01c49c89?a=0xF7C78ae754889471ca51BC8CC67Ee50C01c49C89" target="_blank" class="social-btn" title="View on BscScan">
                <img src="static/img/logo-dark.svg" alt="BscScan" class="custom-icon">
            </a>
        </div>
    </nav>
    
    

    <!-- HERO -->
    <div class="hero" id="home">
        <div>
            <h1>Revolutionize the Automotive Industry</h1>
            <p>Carify leverages Blockchain and NFTs to bring transparency, security, and innovation to vehicle ownership and management. Join us in creating a fairer and more advanced ecosystem.</p>
            <a href="#presale" class="cta">Join Presale Now</a>
        </div>
    </div>

    <section id="project-structure">
        <h2>Project Structure</h2>
        <p>Carify is transforming the automotive industry by leveraging the power of BSC blockchain and NFTs. Discover how we address major challenges with innovative technological solutions.</p>
        <ul>
            <li><strong>Mileage Fraud:</strong> Approximately 20% of used vehicles in Europe have tampered mileage, causing an estimated loss of <strong>€6 billion.</strong></li>
            <li><strong>Document Fraud:</strong> Falsified documents reduce trust in transactions. NFTs ensure data authenticity and reliability.</li>
            <li><strong>Advantages of NFTs:</strong> Each vehicle will be linked to a unique NFT that contains its full history, including mileage, repairs, ownership changes, and even incidents. This ensures transparency and protects against fraud.</li>
            <li><strong>BSC Blockchain:</strong> Real-time traceability makes tampering impossible, reinforcing user confidence and creating a safer marketplace.</li>
            <li><strong>Vehicle History:</strong> The integration of NFTs provides a transparent and immutable record of every vehicle's life cycle. Buyers and sellers can access this history, ensuring they make informed decisions while significantly reducing fraud in the automotive sector.</li>
        </ul>
    </section>
    
    

    <!-- ABOUT -->
    <section id="about">
        <h2>About Carify</h2>
        <p>Carify is a revolutionary platform that harnesses the power of the BSC blockchain to transform the automotive industry. Our mission is to create a decentralized ecosystem where every transaction is secure, transparent, and fast. By combining blockchain technology with NFTs, we offer an innovative solution for vehicle management, combating fraud, and enhancing trust among industry stakeholders.</p>
    </section>

    <!-- FEATURES -->
    <section id="features">
        <h2>Key Features</h2>
        <div class="features">
            <div class="feature">
                <h3>Enhanced Security</h3>
                <p>Thanks to the immutable nature of blockchain, all transactions and data are protected against tampering and fraud.</p>
            </div>
            <div class="feature">
                <h3>NFT License Plates</h3>
                <p>Each vehicle is associated with a unique digital plate in the form of an NFT, ensuring complete traceability.</p>
            </div>
            <div class="feature">
                <h3>Total Transparency</h3>
                <p>All information is accessible in real-time, fostering trust between buyers, sellers, and third parties.</p>
            </div>
            <div class="feature">
                <h3>Fast Transactions</h3>
                <p>The BSC blockchain enables near-instant transactions with minimal fees, improving operational efficiency.</p>
            </div>
            <div class="feature">
                <h3>Decentralized Ecosystem</h3>
                <p>Elimination of unnecessary intermediaries, reducing costs and simplifying administrative processes.</p>
            </div>
            <div class="feature">
                <h3>Social Impact</h3>
                <p>Combating fraud and corruption in the automotive sector while promoting a fairer economy.</p>
            </div>
        </div>
    </section>

    <section id="presale">
        <h2>Token Presale</h2>
        <p>Secure your Carify tokens today before the public launch and join the blockchain revolution.</p>
    
        <!-- Countdown Timer -->
        <div class="countdown-container">
            <div class="countdown-box">
                <span id="days">00</span>
                <p>Days</p>
            </div>
            <div class="countdown-box">
                <span id="hours">00</span>
                <p>Hours</p>
            </div>
            <div class="countdown-box">
                <span id="minutes">00</span>
                <p>Minutes</p>
            </div>
            <div class="countdown-box">
                <span id="seconds">00</span>
                <p>Seconds</p>
            </div>
        </div>

        <div class="add-token-container">
            <button id="addTokenButton" class="add-token-btn">
                Add $CARI to Wallet
            </button>
        </div>
    
        <!-- Compteur de tokens -->
        <div class="token-counter">
            <p><strong>Tokens Sold:</strong></p>
            <div>
                <span id="soldTokens">0</span> 
            </div>
        </div>

    <!-- Wallet Section -->
    <div class="wallet-section">
        <button id="walletButton" class="presale-wallet-btn">
            <img src="static/img/wlt.png" style="width: 20px; height: 20px;"> Connect Wallet
        </button>
        <div id="walletDropdown" class="wallet-dropdown">
            <p>Connected as: <span id="walletAddress">Not connected</span></p>
            <button id="disconnectWalletBtn">Disconnect Wallet</button>
        </div>
    </div>

    <!-- Buying Tokens -->
    <div class="buy-presale-container">
        <p>Enter the amount of BNB you wish to invest:</p>
        <input type="number" id="bnbInput" placeholder="Enter BNB amount" step="0.01" min="0">
        <p>You will receive approximately <span id="calculatedTokens">0.00</span> $CARI.</p>
        <button id="buyButton" class="presale-buy-btn">Buy Now</button>
        <p id="infoMessage" style="margin-top:10px;"></p>
    </div>

    
    
</section>
    


<!-- Font Awesome Import (if not already included in the <head>) -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" crossorigin="anonymous" />


    <!-- ROADMAP -->
    <section id="roadmap">
        <h2>Our Roadmap</h2>
        <p>Discover the key milestones of our project and our vision for the future of the automotive industry.</p>
        <div class="timeline">
            <div class="timeline-item" data-aos="fade-up">
                <div class="timeline-content">
                    <h3>Phase 1: Project Launch (0-6 months)</h3>
                    <p>Creation of the Carify token on the BSC blockchain, development of the initial platform, and establishment of the foundations of our ecosystem.</p>
                </div>
            </div>
            <div class="timeline-item" data-aos="fade-up" data-aos-delay="100">
                <div class="timeline-content">
                    <h3>Phase 2: Initial Sale and Strategic Partnerships (6-12 months)</h3>
                    <p>Launch of the ICO to raise funds, establishment of partnerships with key players in the automotive and technology sectors.</p>
                </div>
            </div>
            <div class="timeline-item" data-aos="fade-up" data-aos-delay="200">
                <div class="timeline-content">
                    <h3>Phase 3: Deployment of NFT Plates (12-18 months)</h3>
                    <p>Integration of digital license plates, development of a mobile application for users, and launch of the first services on the platform.</p>
                </div>
            </div>
            <div class="timeline-item" data-aos="fade-up" data-aos-delay="300">
                <div class="timeline-content">
                    <h3>Phase 4: International Expansion (18-36 months)</h3>
                    <p>Extension of our services globally, adaptation to local regulations, and creation of a global network of partners.</p>
                </div>
            </div>
            <div class="timeline-item" data-aos="fade-up" data-aos-delay="400">
                <div class="timeline-content">
                    <h3>Phase 5: Continuous Innovation (36 months and beyond)</h3>
                    <p>Introduction of new services such as smart contracts for insurance, crowdfunding for vehicles, and integration of IoT for better connectivity.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- FAQ -->
    <section id="faq">
        <h2>Frequently Asked Questions</h2>
        <p>Find answers to common questions about Carify and our future blockchain solutions.</p>
        <div class="faq-container">
            <div class="faq-item">
                <button class="faq-question">
                    <span>How will NFTs be used in Carify?</span>
                    <i class="fas fa-chevron-down"></i>
                </button>
                <div class="faq-answer">
                    <p>In the future, each vehicle will be linked to a unique NFT containing its full history, such as mileage, repairs, and ownership changes. This will ensure transparency and security in transactions.</p>
                </div>
            </div>
            <div class="faq-item">
                <button class="faq-question">
                    <span>Why is the BSC blockchain the right choice?</span>
                    <i class="fas fa-chevron-down"></i>
                </button>
                <div class="faq-answer">
                    <p>The BSC blockchain offers low fees, scalability, and fast transactions. These features make it ideal for managing vehicle-related data and ensuring the reliability of the system we plan to implement.</p>
                </div>
            </div>
            <div class="faq-item">
                <button class="faq-question">
                    <span>Will Carify NFTs enable vehicle sales?</span>
                    <i class="fas fa-chevron-down"></i>
                </button>
                <div class="faq-answer">
                    <p>Yes, in the future. Once implemented, Carify NFTs will allow users to transfer vehicle ownership securely and seamlessly by selling the corresponding NFT.</p>
                </div>
            </div>
            <div class="faq-item">
                <button class="faq-question">
                    <span>When will these features be available?</span>
                    <i class="fas fa-chevron-down"></i>
                </button>
                <div class="faq-answer">
                    <p>Carify is currently in its presale phase. The development of NFTs and other features is planned as part of our roadmap and will be introduced in upcoming project phases.</p>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Footer -->
    <footer class="site-footer">        
        <div class="container">
            <p>&copy; 2024 Carify. All rights reserved.</p>
            <p>Contact us: <a href="mailto:contact@carify.app">contact@carify.app</a></p>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js" crossorigin="anonymous"></script>
    <script>
        document.getElementById("addTokenButton").addEventListener("click", async () => {
    try {
        const tokenAddress = "0xF7C78ae754889471ca51BC8CC67Ee50C01c49C89"; // Adresse du contrat
        const tokenSymbol = "CARI"; // Symbole du token
        const tokenDecimals = 18; // Décimales du token
        const tokenImage = "static/img/lg.png"; // Image du token (URL vers une icône)

        // Demander à MetaMask d'ajouter le token
        const wasAdded = await ethereum.request({
            method: "wallet_watchAsset",
            params: {
                type: "ERC20",
                options: {
                    address: tokenAddress,
                    symbol: tokenSymbol,
                    decimals: tokenDecimals,
                    image: tokenImage,
                },
            },
        });

        if (wasAdded) {
            alert("$CARI successfully added to your wallet!");
        } else {
            alert("Token addition cancelled by user.");
        }
    } catch (error) {
        console.error("Error adding token to wallet:", error);
        alert("An error occurred. Please try again.");
    }
});

    </script>
    <script>
        const totalTokens = 3750000000; // Total de tokens disponibles
let soldTokens = 0; // Initialisation du compteur à 0

// Fonction pour mettre à jour le compteur de tokens vendus
function updateTokenCounter(amountSold) {
    soldTokens += amountSold; // Ajoute le nombre de tokens achetés
    const soldTokensElement = document.getElementById('soldTokens');
    soldTokensElement.textContent = soldTokens.toLocaleString(); // Met à jour l'affichage avec un format lisible
}

// Gestion de l'achat de tokens
document.getElementById('buyButton').addEventListener('click', async () => {
    const bnbAmount = parseFloat(document.getElementById('bnbInput').value) || 0;
    const tokenPrice = 0.000005; // Prix en BNB par token
    const tokenAmount = Math.floor(bnbAmount / tokenPrice); // Calcul du nombre de tokens

    if (bnbAmount > 0 && tokenAmount > 0) {
        try {
            updateTokenCounter(tokenAmount); // Met à jour le compteur après l'achat
            document.getElementById('infoMessage').textContent = `Thank you! You purchased ${tokenAmount} tokens.`;
        } catch (error) {
            console.error("Erreur lors de la mise à jour du compteur :", error);
            document.getElementById('infoMessage').textContent = "An error occurred during the purchase.";
        }
    } else {
        document.getElementById('infoMessage').textContent = "Please enter a valid BNB amount.";
    }
});
    </script>
    <script src="static/js/comb.js"></script>
    <script>
        async function fetchTokenData() {
    const apiUrl = "https://api.bscscan.com/api?module=account&action=tokenbalance&contractaddress=0xf7c78ae754889471ca51bc8cc67ee50c01c49c89&address=0xf7c78ae754889471ca51bc8cc67ee50c01c49c89&tag=latest&apikey=TCIM2RPGJH6YVDGCY5JB7DIPGZTC5EUPDK";
    const totalTokens = 3750000000; // Total des tokens disponibles

    try {
        const response = await fetch(apiUrl);
        const data = await response.json();

        if (data.status === "1") {
            const balanceInWei = BigInt(data.result); // Solde restant en wei
            const balance = Number(balanceInWei) / 1e18; // Conversion en tokens
            const soldTokens = totalTokens - balance; // Calcul des tokens vendus

            // Mise à jour de l'élément HTML
            document.getElementById("soldTokens").textContent = `${Math.floor(soldTokens).toLocaleString()} / ${totalTokens.toLocaleString()}`;
        } else {
            console.error("Erreur API BscScan :", data.message);
            document.getElementById("soldTokens").textContent = "Error fetching data";
        }
    } catch (error) {
        console.error("Error retrieving data :", error);
        document.getElementById("soldTokens").textContent = "Error";
    }
}

// Appel de la fonction pour récupérer les données au chargement de la page
fetchTokenData();

    </script>
    
    <script>
        AOS.init({
            duration: 1000,
            once: true,
        });
    </script>
    <!-- Web3.js -->
    <script src="https://cdn.jsdelivr.net/npm/web3/dist/web3.min.js"></script>
    <script>
        // Code previously in index.js, now inline

        // Initialisation des variables globales
        let web3;
        let userAddress = null;

        // Adresse et ABI du contrat intelligent
        const contractAddress = "0xF7C78ae754889471ca51BC8CC67Ee50C01c49C89";
        const contractABI = [
            {
                "inputs": [{ "internalType": "uint256", "name": "_amount", "type": "uint256" }],
                "name": "buyTokens",
                "outputs": [],
                "stateMutability": "payable",
                "type": "function"
            },
            {
                "inputs": [],
                "name": "pricePerToken",
                "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }],
                "stateMutability": "view",
                "type": "function"
            },
            {
                "inputs": [],
                "name": "totalSupply",
                "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }],
                "stateMutability": "view",
                "type": "function"
            },
            {
                "inputs": [],
                "name": "decimals",
                "outputs": [{ "internalType": "uint8", "name": "", "type": "uint8" }],
                "stateMutability": "view",
                "type": "function"
            }
        ];

        // Références DOM
        const walletButton = document.getElementById("walletButton");
        const walletDropdown = document.getElementById("walletDropdown");
        const walletAddress = document.getElementById("walletAddress");
        const disconnectWalletBtn = document.getElementById("disconnectWalletBtn");
        const bnbInput = document.getElementById("bnbInput");
        const buyButton = document.getElementById("buyButton");
        const calculatedTokens = document.getElementById("calculatedTokens");
        const infoMessage = document.getElementById("infoMessage");

        // Prix par token (sera récupéré dynamiquement)
        let tokenPrice;

        // Initialisation du contrat intelligent
        let tokenContract;

        // Fonction pour connecter le portefeuille via MetaMask
        async function connectWallet() {
            if (typeof window.ethereum === "undefined") {
                alert("MetaMask is not installed. Please install the extension.");
                return;
            }

            try {
                const accounts = await window.ethereum.request({ method: "eth_requestAccounts" });
                if (accounts.length === 0) {
                    alert("No MetaMask accounts found.");
                    return;
                }

                web3 = new Web3(window.ethereum);
                userAddress = accounts[0];
                tokenContract = new web3.eth.Contract(contractABI, contractAddress);
                updateWalletDisplay(userAddress);

                // Sauvegarder l'adresse dans localStorage
                localStorage.setItem("connectedAddress", userAddress);
                console.log(`Saved connected address : ${userAddress}`);

                await fetchTokenPrice();
            } catch (error) {
                console.error("Error connecting :", error);
                alert("Une erreur est survenue lors de la connexion au portefeuille.");
            }
        }

        // Fonction pour mettre à jour l'affichage du bouton de connexion
        function updateWalletDisplay(address) {
            if (address) {
                walletButton.innerHTML = `<img src="/static/img/wlt.png" style="width: 20px; height: 20px;"> ${address.slice(0, 6)}...${address.slice(-4)}`;
                walletDropdown.classList.add("show");
                walletAddress.textContent = `${address.slice(0, 6)}...${address.slice(-4)}`;
            } else {
                walletButton.innerHTML = `<img src="static/img/wlt.png" style="width: 20px; height: 20px;"> Connect Wallet`;
                walletDropdown.classList.remove("show");
                walletAddress.textContent = "Not connected";
            }
        }

        // Fonction pour simuler une déconnexion locale
        async function disconnectWallet() {
            try {
                userAddress = null;
                localStorage.removeItem("connectedAddress");
                updateWalletDisplay(null);
            } catch (error) {
                console.error("Error trying to log out :", error);
            }
        }

        // Fonction pour vérifier si un portefeuille est connecté au chargement de la page
        async function initializeWalletState() {
            const savedAccount = localStorage.getItem("connectedAddress");
            if (savedAccount) {
                try {
                    web3 = new Web3(window.ethereum);
                    userAddress = savedAccount;
                    tokenContract = new web3.eth.Contract(contractABI, contractAddress);
                    updateWalletDisplay(userAddress);
                    await fetchTokenPrice();
                } catch (error) {
                    console.error("Error initializing wallet :", error);
                }
            } else {
                updateWalletDisplay(null);
            }
        }

        // Gestion des changements de compte dans MetaMask
        window.ethereum?.on("accountsChanged", (accounts) => {
            if (accounts.length > 0) {
                console.log("Compte changé :", accounts[0]);
                userAddress = accounts[0];
                localStorage.setItem("connectedAddress", accounts[0]);
                updateWalletDisplay(userAddress);
            } else {
                console.log("Aucun compte détecté. Déconnexion locale.");
                disconnectWallet();
            }
        });

        // Gestion des clics sur le bouton "Connecter Wallet"
        walletButton.addEventListener("click", async () => {
            if (!userAddress) {
                await connectWallet();
            } else {
                walletDropdown.classList.toggle("show");
            }
        });

        // Gestion des clics sur le bouton "Déconnecter Wallet"
        disconnectWalletBtn.addEventListener("click", async () => {
            await disconnectWallet();
        });

        // Calcul des tokens en temps réel lors de la saisie de BNB
        bnbInput.addEventListener("input", () => {
            const bnbAmount = parseFloat(bnbInput.value) || 0;
            const tokenAmount = bnbAmount / tokenPrice;
            calculatedTokens.textContent = tokenAmount.toFixed(2);
        });

        async function fetchTokenPrice() {
    try {
        const priceInWei = await tokenContract.methods.pricePerToken().call();
        tokenPrice = web3.utils.fromWei(priceInWei, "ether");
        console.log(`Token price successfully fetched: ${tokenPrice} BNB`);
    } catch (error) {
        console.error("Error fetching token price:", error);
        alert("Unable to fetch token price. Please try again later.");
    }
}


        // Fonction pour acheter des tokens
        async function buyTokens() {
            if (!userAddress) {
                alert("Please connect your wallet before proceeding.");
                return;
            }

            const bnbAmount = parseFloat(bnbInput.value);
            if (isNaN(bnbAmount) || bnbAmount <= 0) {
                alert("Please enter a valid BNB amount.");
                return;
            }

            let valueInWei;
            try {
                valueInWei = web3.utils.toWei(bnbAmount.toFixed(18).toString(), "ether");
            } catch (error) {
                console.error("Error converting to Wei :", error);
                alert("Invalid amount. Please enter a valid amount.");
                return;
            }

            const tokenAmount = Math.floor(bnbAmount / tokenPrice);

            try {
                infoMessage.textContent = "Transaction in progress...";
                infoMessage.style.color = "green";

                await tokenContract.methods.buyTokens(tokenAmount).send({
                    from: userAddress,
                    value: valueInWei,
                });

                infoMessage.textContent = `Successful purchase! You bought ${tokenAmount} tokens.`;
                infoMessage.style.color = "green";

                bnbInput.value = "";
                calculatedTokens.textContent = "0.00";
            } catch (error) {
                console.error("Error during purchase :", error);
                infoMessage.textContent = "Error during purchase. Please try again.";
                infoMessage.style.color = "red";
            }
        }

        // Gestion des clics sur le bouton d'achat
        buyButton.addEventListener("click", async () => {
            await buyTokens();
        });

        // Initialiser l'état du portefeuille lors du chargement de la page
        initializeWalletState();
    </script>
    <script>
        document.querySelectorAll('.faq-question').forEach(button => {
            button.addEventListener('click', () => {
                const faqItem = button.parentElement;
                faqItem.classList.toggle('open');
            });
        });
    </script>
    
    <script>
        // Countdown Timer
const presaleEndDate = new Date("2025-01-31T23:59:59").getTime();

function updateCountdown() {
    const now = new Date().getTime();
    const timeLeft = presaleEndDate - now;

    if (timeLeft > 0) {
        const days = Math.floor(timeLeft / (1000 * 60 * 60 * 24));
        const hours = Math.floor((timeLeft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);

        document.getElementById("days").textContent = days.toString().padStart(2, "0");
        document.getElementById("hours").textContent = hours.toString().padStart(2, "0");
        document.getElementById("minutes").textContent = minutes.toString().padStart(2, "0");
        document.getElementById("seconds").textContent = seconds.toString().padStart(2, "0");
    } else {
        clearInterval(countdownTimer);
        document.querySelector(".countdown-container").textContent = "Presale has ended!";
    }
}

const countdownTimer = setInterval(updateCountdown, 1000);
updateCountdown();

    </script>
    <script>
        // Appel de la fonction fetchTokenData au chargement de la page
        fetchTokenData();
    
        // Rafraîchir les données toutes les 30 secondes
        setInterval(fetchTokenData, 30000);
    </script>
</body>
</html>
